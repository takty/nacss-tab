{"version":3,"sources":["tab.js"],"names":["window","NS","setClass","tar","cls","enabled","val","key","substr","startsWith","dataset","c","join","classList","add","remove","resizeListeners","onResize","fn","doFirst","push","isRunning","args","requestAnimationFrame","throttle","onIntersect","targets","threshold","rootMargin","vs","Array","length","fill","tm","Map","forEach","t","i","set","mt","io","st","s","getComputedStyle","document","documentElement","parseInt","scrollPaddingTop","Number","isNaN","getScrollOffset","clearTimeout","setTimeout","disconnect","IntersectionObserver","es","e","get","target","isIntersecting","replace","observe","init","addEventListener","l","passive","apply","cs","opts","Object","assign","styleBar","styleCurrent","styleActive","hashPrefix","is","inst","create","onHashChanged","getCurrentByHash","location","hash","active","update","cont","cid","uls","hs","extractHeadings","noHash","bars","h","idx","bar","createBar","insertBefore","ul","elm","assignEvent","id","getElementById","indexOf","prefix","fh","getFirstHeading","tn","tagName","children","curH","activate","createElement","className","as","a","createAnchor","li","appendChild","onClick","from","to","fromY","getBoundingClientRect","top","toR","y","height","innerHeight","scrollBy","getFirstVisible","find","applyScroll","styleVertical","maxHeightRate","maxVerticalWidth","doRemoveHeading","doUseHeadingId","doUseBarBelow","console","log","resize","scrollIntoView","behavior","getAnchorPage","ps","curIdx","extractHeadingsAndPages","bar0","bar1","firstChild","p","isVertical","re","RegExp","href","match","findIndex","contains","curP","removeChild","preventDefault","parentElement","pointerEvents","url","currentTarget","history","pushState","scrollToTab","undefined","hasClass","ul0","ul1","r0","bottom","r1","a0","a1","innerWidth","style","minHeight","display","minH","getMinHeight","marginBtm","marginBottom","marginTop","mb","Math","max","offsetHeight","applyStack","container","test","title","innerText","innerHTML","querySelectorAll","spanning","replaceChild"],"mappings":"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","file":"tab.min.js","sourcesContent":["/**\n * Tab\n *\n * @author Takuto Yanagida\n * @version 2021-12-26\n */\n\n'use strict';\n\nwindow['NACSS']        = window['NACSS']        || {};\nwindow['NACSS']['tab'] = window['NACSS']['tab'] || {};\n\n((NS) => {\n\n\t/**\n\t * Style Class Utilities\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-11-11\n\t */\n\t\n\tfunction hasClass(tar, cls) {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn tar.dataset[key] !== undefined;\n\t\t} else {\n\t\t\treturn tar.classList.contains(key);\n\t\t}\n\t}\n\t\n\tfunction setClass(tar, cls, enabled = true, val = '') {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\tif (enabled) {\n\t\t\t\ttar.dataset[key] = val;\n\t\t\t} else {\n\t\t\t\tdelete tar.dataset[key];\n\t\t\t}\n\t\t} else {\n\t\t\tconst c = [key, val].join('-');\n\t\t\tif (enabled) {\n\t\t\t\ttar.classList.add(c);\n\t\t\t} else {\n\t\t\t\ttar.classList.remove(c);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction getSelector(cls) {\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn `*[data-${cls.substr(1).replace(/([A-Z])/g, c => '-' + c.charAt(0).toLowerCase())}]`;\n\t\t} else {\n\t\t\treturn `*${cls}`;\n\t\t}\n\t}\n\t\n\t/**\n\t * Utilities\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-12-06\n\t */\n\t\n\tfunction getScrollOffset() {\n\t\tconst s   = getComputedStyle(document.documentElement);\n\t\tconst val = parseInt(s.scrollPaddingTop);\n\t\treturn Number.isNaN(val) ? 0 : val;\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction throttle(fn) {\n\t\tlet isRunning;\n\t\treturn (...args) => {\n\t\t\tif (isRunning) return;\n\t\t\tisRunning = true;\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tisRunning = false;\n\t\t\t\tfn(...args);\n\t\t\t});\n\t\t};\n\t}\n\t\n\tconst resizeListeners = [];\n\t\n\tfunction onResize(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tresizeListeners.push(throttle(fn));\n\t}\n\t\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\twindow.addEventListener('resize', () => {\n\t\t\tfor (const l of resizeListeners) l();\n\t\t}, { passive: true });\n\t});\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction onIntersect(fn, targets, threshold = 0, rootMargin = '* 0px 0px 0px') {\n\t\tconst vs = Array(targets.length).fill(false);\n\t\tconst tm = new Map();\n\t\ttargets.forEach((t, i) => tm.set(t, i));\n\t\n\t\tfunction init() {\n\t\t\tconst io = new IntersectionObserver((es) => {\n\t\t\t\tfor (const e of es) vs[tm.get(e.target)] = e.isIntersecting;\n\t\t\t\tfn(vs);\n\t\t\t}, { rootMargin: rootMargin.replace('*', `${mt}px`), threshold });\n\t\t\tfor (const t of targets) io.observe(t);\n\t\t\treturn io;\n\t\t}\n\t\tlet mt = 0;\n\t\tlet io = null;\n\t\tlet st = null;\n\t\tonResize(() => {\n\t\t\tmt = -getScrollOffset();\n\t\t\tif (st) clearTimeout(st);\n\t\t\tst = setTimeout(() => {\n\t\t\t\tif (io) io.disconnect();\n\t\t\t\tio = init();\n\t\t\t}, 100);\n\t\t}, true);\n\t}\n\t\n\t{\n\t\t/**\n\t\t * Scroll\n\t\t *\n\t\t * @author Takuto Yanagida\n\t\t * @version 2023-01-16\n\t\t */\n\t\t\n\t\tfunction apply(cs, opts = {}) {\n\t\t\tif (cs.length === 0) return;\n\t\t\n\t\t\topts = Object.assign({\n\t\t\t\tstyleBar    : ':ncTabBar',\n\t\t\t\tstyleCurrent: ':ncCurrent',\n\t\t\t\tstyleActive : ':ncActive',\n\t\t\t\thashPrefix  : 'tsc:',\n\t\t\t}, opts);\n\t\t\tconst is = [];\n\t\t\tfor (let i = 0; i < cs.length; i += 1) {\n\t\t\t\tconst inst = create(cs[i], i + 1, opts);\n\t\t\t\tif (inst) is.push(inst);\n\t\t\t}\n\t\t\twindow.addEventListener('hashchange', () => is.forEach(onHashChanged));\n\t\t}\n\t\t\n\t\tfunction onHashChanged(inst) {\n\t\t\tconst tar = getCurrentByHash(inst, location.hash);\n\t\t\tinst.active = tar;\n\t\t\tsetTimeout(() => update(inst), 10);\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction create(cont, cid, opts) {\n\t\t\tconst inst = {\n\t\t\t\topts,\n\t\t\t\tvs    : null,\n\t\t\t\tuls   : [],\n\t\t\t\tactive: null,\n\t\t\t}\n\t\t\tconst hs = extractHeadings(cont, cid, opts.hashPrefix);\n\t\t\tif (hs.length === 0) return false;\n\t\t\n\t\t\tconst noHash = location.hash.length <= 1;\n\t\t\tconst bars   = [];\n\t\t\ths.forEach((h, idx) => {\n\t\t\t\tconst bar = createBar(hs, h, opts, noHash && idx === 0);\n\t\t\t\tcont.insertBefore(bar.ul, h.elm);\n\t\t\t\tbars.push(bar);\n\t\t\t\tinst.uls.push(bar.ul);\n\t\t\t});\n\t\t\tassignEvent(inst, bars);\n\t\t\n\t\t\tinst.active = getCurrentByHash(inst, location.hash);\n\t\t\tsetTimeout(() => update(inst), 100);  // For avoiding unnecessary update\n\t\t\treturn inst;\n\t\t}\n\t\t\n\t\tfunction getCurrentByHash(inst, hash) {\n\t\t\tconst id = hash.replace('#', '');\n\t\t\tif (id !== '') {\n\t\t\t\tconst tar = document.getElementById(id);\n\t\t\t\tif (tar && inst.uls.indexOf(tar) !== 0) {\n\t\t\t\t\treturn tar;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction extractHeadings(cont, cid, prefix) {\n\t\t\tconst fh = getFirstHeading(cont);\n\t\t\tif (!fh) return [];\n\t\t\tconst tn = fh.tagName;\n\t\t\tconst hs = [];\n\t\t\n\t\t\tfor (const elm of [...cont.children]) {\n\t\t\t\tif (elm.tagName === tn) {\n\t\t\t\t\tconst id = `${prefix}${cid}-${hs.length + 1}`;\n\t\t\t\t\ths.push({ elm, id });\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn hs;\n\t\t}\n\t\t\n\t\tfunction createBar(hs, curH, opts, activate) {\n\t\t\tconst ul = document.createElement('ul');\n\t\t\tul.id = curH.id;\n\t\t\tul.className = '';  // for Dummy\n\t\t\tsetClass(ul, opts.styleBar);\n\t\t\tif (activate) setClass(ul, opts.styleActive);\n\t\t\tconst as = [];\n\t\t\n\t\t\tfor (const h of hs) {\n\t\t\t\tconst a = createAnchor(h);\n\t\t\t\tconst li = document.createElement('li');\n\t\t\t\tif (h === curH) {\n\t\t\t\t\tsetClass(a, opts.styleCurrent);\n\t\t\t\t\tsetClass(li, opts.styleCurrent);\n\t\t\t\t}\n\t\t\t\tli.appendChild(a);\n\t\t\t\tul.appendChild(li);\n\t\t\t\tas.push(a);\n\t\t\t}\n\t\t\treturn { ul, as };\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction assignEvent(inst, bars) {\n\t\t\tfor (const bar of bars) {\n\t\t\t\tbar.as.forEach((a, i) => {\n\t\t\t\t\ta.addEventListener('click', () => onClick(inst, bar.ul, bars[i].ul));\n\t\t\t\t});\n\t\t\t}\n\t\t\tonIntersect((vs) => {\n\t\t\t\tinst.vs = vs;\n\t\t\t\tupdate(inst);\n\t\t\t}, inst.uls, 0);\n\t\t}\n\t\t\n\t\tfunction onClick(inst, from, to) {\n\t\t\tif (to !== from) {\n\t\t\t\tconst fromY = from.getBoundingClientRect().top;\n\t\t\t\tconst toR   = to.getBoundingClientRect();\n\t\t\t\tif (toR.y < fromY && 0 <= toR.y && toR.y + toR.height < window.innerHeight) {\n\t\t\t\t\tsetTimeout(() => window.scrollBy({ top: toR.y - fromY, }), 200);\n\t\t\t\t}\n\t\t\t}\n\t\t\n\t\t\tinst.active = to;\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (inst.active) {\n\t\t\t\t\tconst y = inst.active.getBoundingClientRect().top;\n\t\t\t\t\tinst.active = null;\n\t\t\t\t\tif (window.innerHeight < y) update(inst);\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t}\n\t\t\n\t\tfunction update(inst) {\n\t\t\tconst tar = inst.active ? inst.active : getFirstVisible(inst);\n\t\t\tfor (const ul of inst.uls) {\n\t\t\t\tsetClass(ul, inst.opts.styleActive, ul === tar);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction getFirstVisible(inst) {\n\t\t\tif (!inst.vs) return null;\n\t\t\treturn inst.uls.find((ul, i) => inst.vs[i]);\n\t\t}\n\t\t\n\t\tNS.applyScroll = apply;\n\t}\n\t{\n\t\t/**\n\t\t * Stack\n\t\t *\n\t\t * @author Takuto Yanagida\n\t\t * @version 2023-01-14\n\t\t */\n\t\t\n\t\tfunction apply(cs, opts = {}) {\n\t\t\tif (cs.length === 0) return;\n\t\t\n\t\t\topts = Object.assign({\n\t\t\t\tstyleBar        : ':ncTabBar',\n\t\t\t\tstyleCurrent    : ':ncCurrent',\n\t\t\t\tstyleActive     : ':ncActive',\n\t\t\t\tstyleVertical   : ':ncVertical',\n\t\t\t\thashPrefix      : 'tst:',\n\t\t\t\tmaxHeightRate   : 0.8,\n\t\t\t\tmaxVerticalWidth: 599.5,\n\t\t\t\tdoRemoveHeading : false,\n\t\t\t\tdoUseHeadingId  : false,\n\t\t\t\tdoUseBarBelow   : true,\n\t\t\t}, opts);\n\t\t\tif (!opts.doRemoveHeading && opts.doUseHeadingId) {\n\t\t\t\topts.doUseHeadingId = false;\n\t\t\t\tconsole.log('nacss.tab.stack: \\'opts.doRemoveHeading\\' must be true when \\'opts.doUseHeadingId\\' is true');\n\t\t\t}\n\t\t\tconst is = [];\n\t\t\tfor (let i = 0; i < cs.length; i += 1) {\n\t\t\t\tconst inst = create(cs[i], i + 1, opts);\n\t\t\t\tif (inst) is.push(inst);\n\t\t\t}\n\t\t\tonResize(() => is.forEach(resize), true);\n\t\t\twindow.addEventListener('hashchange', () => is.forEach(onHashChanged) );\n\t\t\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst id = location.hash.replace('#', '');\n\t\t\t\tif (id !== '') {\n\t\t\t\t\tconst tar = document.getElementById(id);\n\t\t\t\t\tif (tar) tar.scrollIntoView({ behavior: 'smooth' });\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\t\n\t\tfunction onHashChanged(inst) {\n\t\t\tlet idx = getCurrentByHash(inst, location.hash);\n\t\t\tif (idx === null) idx = getAnchorPage(inst, location.hash);\n\t\t\tif (idx !== null) setTimeout(() => update(inst, idx), 10);\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction create(cont, cid, opts) {\n\t\t\tconst inst = {\n\t\t\t\topts,\n\t\t\t\tcont,\n\t\t\t\tps    : null,\n\t\t\t\tbars  : [],\n\t\t\t\tcurIdx: 0,\n\t\t\t};\n\t\t\tconst [hs, ps] = extractHeadingsAndPages(cont, cid, opts);\n\t\t\tif (hs.length === 0) return false;\n\t\t\tinst.ps = ps;\n\t\t\n\t\t\tconst bar0 = createBar(hs, opts);\n\t\t\tconst bar1 = createBar(hs, opts);\n\t\t\tinst.bars.push(bar0, bar1);\n\t\t\n\t\t\tcont.insertBefore(bar0.ul, cont.firstChild);\n\t\t\tfor (const p of ps) cont.appendChild(p);\n\t\t\tcont.appendChild(bar1.ul);\n\t\t\n\t\t\tassignEvent(inst);\n\t\t\n\t\t\tconst h = location.hash;\n\t\t\tlet idx = getCurrentByHash(inst, h);\n\t\t\tif (idx === null) idx = getAnchorPage(inst, h);\n\t\t\tif (idx === null) idx = isVertical(inst) ? -1 : 0;\n\t\t\tsetTimeout(() => update(inst, idx), 10);\n\t\t\treturn inst;\n\t\t}\n\t\t\n\t\tfunction getCurrentByHash(inst, hash) {\n\t\t\tif (hash.indexOf('#') === -1) return null;\n\t\t\tconst re = new RegExp(hash + '$', 'g');\n\t\t\tconst as = inst.bars[0].as;\n\t\t\tfor (let i = 0; i < as.length; i += 1) {\n\t\t\t\tif (as[i].href.match(re)) return i;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tfunction getAnchorPage(inst, hash) {\n\t\t\tconst id = hash.replace('#', '');\n\t\t\tif (id !== '') {\n\t\t\t\tconst tar = document.getElementById(id);\n\t\t\t\tif (tar) {\n\t\t\t\t\tconst idx = inst.ps.findIndex(p => p.contains(tar));\n\t\t\t\t\tif (idx !== -1) return idx;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction extractHeadingsAndPages(cont, cid, opts) {\n\t\t\tconst fh = getFirstHeading(cont);\n\t\t\tif (!fh) return [];\n\t\t\tconst tn = fh.tagName;\n\t\t\tconst hs = [];\n\t\t\tconst ps = [];\n\t\t\tlet curP = null;\n\t\t\n\t\t\tfor (const elm of [...cont.children]) {\n\t\t\t\tif (elm.tagName === tn) {\n\t\t\t\t\tconst id = (opts.doUseHeadingId && elm.id) ? elm.id : `${opts.hashPrefix}${cid}-${hs.length + 1}`;\n\t\t\t\t\ths.push({ elm, id });\n\t\t\n\t\t\t\t\tif (curP) ps.push(curP);\n\t\t\t\t\tcurP = document.createElement('div');\n\t\t\t\t\tif (opts.doRemoveHeading) {\n\t\t\t\t\t\tcont.removeChild(elm);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurP.appendChild(elm);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (curP) curP.appendChild(elm);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (curP) ps.push(curP);\n\t\t\treturn [hs, ps];\n\t\t}\n\t\t\n\t\tfunction createBar(hs, opts) {\n\t\t\tconst ul = document.createElement('ul');\n\t\t\tul.className = '';  // for Dummy\n\t\t\tsetClass(ul, opts.styleBar);\n\t\t\tconst as = [];\n\t\t\n\t\t\tfor (const h of hs) {\n\t\t\t\tconst a = createAnchor(h);\n\t\t\t\tconst li = document.createElement('li');\n\t\t\t\tli.appendChild(a);\n\t\t\t\tul.appendChild(li);\n\t\t\t\tas.push(a);\n\t\t\t}\n\t\t\treturn { ul, as };\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction assignEvent(inst) {\n\t\t\tfor (const bar of inst.bars) {\n\t\t\t\tbar.as.forEach((a, i) => {\n\t\t\t\t\ta.addEventListener('click', (e) => onClick(e, inst, i));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction onClick(e, inst, idx) {\n\t\t\te.preventDefault();\n\t\t\tif (getComputedStyle(e.target.parentElement).pointerEvents === 'none') return;\n\t\t\tlet url = e.currentTarget.href;\n\t\t\tif (inst.curIdx === idx) {\n\t\t\t\tidx = -1;\n\t\t\t\turl = url.replace(/#.*$/, '');\n\t\t\t}\n\t\t\thistory.pushState({}, null, url);\n\t\t\tupdate(inst, idx);\n\t\t\tscrollToTab(inst);\n\t\t}\n\t\t\n\t\tfunction isVertical(inst) {\n\t\t\treturn hasClass(inst.cont, inst.opts.styleVertical);\n\t\t}\n\t\t\n\t\tfunction scrollToTab(inst) {\n\t\t\tif (inst.curIdx === -1) return;\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst [{ ul: ul0 }, { ul: ul1 }] = inst.bars;\n\t\t\t\tconst r0 = ul0.getBoundingClientRect();\n\t\t\t\tif (0 <= r0.top && r0.top <= window.innerHeight && 0 <= r0.bottom && r0.bottom <= window.innerHeight) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst r1 = ul1.getBoundingClientRect();\n\t\t\t\tif (isVertical(inst) || (r1.top < 0 || window.innerHeight < r1.bottom)) {\n\t\t\t\t\tinst.cont.scrollIntoView({ behavior: 'smooth' });\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\t\n\t\tfunction update(inst, idx) {\n\t\t\tconst ps = inst.ps;\n\t\t\tconst [{ as: a0 }, { as: a1 }] = inst.bars;\n\t\t\n\t\t\tfor (let i = 0; i < ps.length; i += 1) {\n\t\t\t\tsetClass(a0[i], inst.opts.styleCurrent, i === idx);\n\t\t\t\tsetClass(a1[i], inst.opts.styleCurrent, i === idx);\n\t\t\t\tsetClass(a0[i].parentElement, inst.opts.styleCurrent, i === idx);\n\t\t\t\tsetClass(a1[i].parentElement, inst.opts.styleCurrent, i === idx);\n\t\t\t\tsetClass(ps[i], inst.opts.styleCurrent, i === idx);\n\t\t\t}\n\t\t\tinst.curIdx = idx;\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction resize(inst) {\n\t\t\tconst cont = inst.cont;\n\t\t\tsetClass(cont, inst.opts.styleVertical, window.innerWidth <= inst.opts.maxVerticalWidth);\n\t\t\n\t\t\tif (isVertical(inst)) {\n\t\t\t\tcont.style.minHeight = '';\n\t\t\t\tif (!inst.opts.doUseBarBelow) {\n\t\t\t\t\tinst.bars[1].ul.style.display = '';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst minH = getMinHeight(inst);\n\t\t\t\tconst h = (minH < window.innerHeight * inst.opts.maxHeightRate) ? `${minH}px` : '';\n\t\t\t\tcont.style.minHeight = h;\n\t\t\t\tif (!inst.opts.doUseBarBelow) {\n\t\t\t\t\tinst.bars[1].ul.style.display = 'none';\n\t\t\t\t}\n\t\t\t\tif (inst.curIdx === -1) {\n\t\t\t\t\tupdate(inst, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction getMinHeight(inst) {\n\t\t\tconst [{ ul: ul0 }, { ul: ul1 }] = inst.bars;\n\t\t\n\t\t\tlet marginBtm = parseInt(getComputedStyle(ul0).marginBottom);\n\t\t\tlet marginTop = parseInt(getComputedStyle(ul1).marginTop);\n\t\t\tlet height = 0;\n\t\t\n\t\t\tfor (const p of inst.ps) {\n\t\t\t\tconst ps = getComputedStyle(p);\n\t\t\t\tconst mt = parseInt(ps.marginTop);\n\t\t\t\tconst mb = parseInt(ps.marginBottom);\n\t\t\t\tconst h  = p.getBoundingClientRect().height;\n\t\t\n\t\t\t\tmarginBtm = Math.max(marginBtm, mt);\n\t\t\t\tmarginTop = Math.max(marginTop, mb);\n\t\t\t\theight    = Math.max(height, h);\n\t\t\t}\n\t\t\treturn ul0.offsetHeight + ul1.offsetHeight + marginBtm + marginTop + height;\n\t\t}\n\t\t\n\t\tNS.applyStack = apply;\n\t}\n\t/**\n\t * Common Functions\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2022-01-07\n\t */\n\t\n\tfunction getFirstHeading(container) {\n\t\tconst cs = container.children;\n\t\tfor (let i = 0; i < cs.length; i += 1) {\n\t\t\tif (/^H[1-6]$/.test(cs[i].tagName)) return cs[i];\n\t\t}\n\t\treturn null;\n\t}\n\t\n\tfunction createAnchor(h) {\n\t\tconst a = document.createElement('a');\n\t\ta.href  = '#' + h.id;\n\t\ta.title = h.elm.innerText;\n\t\tconst t = h.elm.title ? h.elm.title : h.elm.innerHTML;\n\t\n\t\ta.innerHTML = t;\n\t\ta.querySelectorAll('small').forEach(e => e.remove());\n\t\tif (a.innerText === '') {\n\t\t\ta.innerHTML = t;\n\t\t}\n\t\tspanning(a);\n\t\treturn a;\n\t}\n\t\n\tfunction spanning(e) {\n\t\tfor (const c of [...e.children]) {\n\t\t\tif (c.tagName === 'A' || c.tagName === 'SMALL') {\n\t\t\t\tconst s = document.createElement('span');\n\t\t\t\ts.innerHTML = c.innerHTML;\n\t\t\t\te.replaceChild(s, c);\n\t\t\t\tspanning(s);\n\t\t\t} else {\n\t\t\t\tspanning(c);\n\t\t\t}\n\t\t}\n\t}\n\t\n\n})(window['NACSS']['tab']);\n"]}