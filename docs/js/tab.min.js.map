{"version":3,"sources":["tab.js"],"names":["window","NS","setClass","tar","cls","enabled","val","key","substr","startsWith","dataset","c","join","classList","add","remove","getFirstHeading","container","cs","children","i","length","test","tagName","createAnchor","h","a","document","createElement","href","id","title","elm","innerText","t","innerHTML","querySelectorAll","forEach","e","spanning","Array","from","s","replaceChild","onHashChanged","inst","getCurrentByHash","location","hash","active","setTimeout","update","create","cont","cid","opts","vs","uls","hs","prefix","fh","tn","push","extractHeaders","hashPrefix","noHash","bars","idx","bar","curH","activate","ul","className","styleBar","styleActive","as","li","styleCurrent","appendChild","createBar","insertBefore","addEventListener","onClick","fn","targets","threshold","rootMargin","fill","tm","Map","init","io","IntersectionObserver","es","get","target","isIntersecting","replace","mt","observe","set","st","onResize","getComputedStyle","documentElement","parseInt","scrollPaddingTop","getScrollOffset","clearTimeout","disconnect","onIntersect","assignEvent","getElementById","indexOf","clicked","y","getBoundingClientRect","top","innerHeight","find","getFirstVisible","tabScroll","Object","assign","is","getAnchorPage","ps","curIdx","curP","doRemoveHeader","removeChild","extractHeadersAndPages","bar0","bar1","firstChild","p","isAccordion","re","RegExp","match","findIndex","contains","preventDefault","parentElement","pointerEvents","url","history","pushState","ul0","ul1","r0","bottom","r1","scrollIntoView","behavior","scrollToTab","flexDirection","a0","a1","resize","style","minHeight","minH","marginBtm","marginBottom","marginTop","height","mb","Math","max","offsetHeight","getMinHeight","maxHeightRate","tabStack","resizeListeners","doFirst","isRunning","args","requestAnimationFrame","throttle","l","passive"],"mappings":"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","file":"tab.min.js","sourcesContent":["/**\n *\n * Tab\n *\n * @author Takuto Yanagida\n * @version 2021-11-11\n *\n */\n\n\nwindow['NACSS'] = window['NACSS'] || {};\n\n\n(function (NS) {\n\n\t(function () {\n\t\t/**\n\t\t *\n\t\t * Scroll\n\t\t *\n\t\t * @author Takuto Yanagida\n\t\t * @version 2021-11-30\n\t\t *\n\t\t */\n\t\t\n\t\t\n\t\tfunction initialize(cs, opts = {}) {\n\t\t\tif (cs.length === 0) return;\n\t\t\n\t\t\topts = Object.assign({\n\t\t\t\tstyleBar    : ':ncTabBar',\n\t\t\t\tstyleCurrent: ':ncCurrent',\n\t\t\t\tstyleActive : ':ncActive',\n\t\t\t\thashPrefix  : 'tsc:',\n\t\t\t}, opts);\n\t\t\tconst is = [];\n\t\t\tfor (let i = 0; i < cs.length; i += 1) {\n\t\t\t\tconst inst = create(cs[i], i + 1, opts);\n\t\t\t\tif (inst) is.push(inst);\n\t\t\t}\n\t\t\twindow.addEventListener('hashchange', () => is.forEach(onHashChanged));\n\t\t}\n\t\t\n\t\tfunction onHashChanged(inst) {\n\t\t\tconst tar = getCurrentByHash(inst, location.hash);\n\t\t\tinst.active = tar;\n\t\t\tsetTimeout(() => update(inst), 10);\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction create(cont, cid, opts) {\n\t\t\tconst inst = {\n\t\t\t\topts,\n\t\t\t\tvs    : null,\n\t\t\t\tuls   : [],\n\t\t\t\tactive: null,\n\t\t\t}\n\t\t\tconst hs = extractHeaders(cont, cid, opts.hashPrefix);\n\t\t\tif (hs.length === 0) return false;\n\t\t\n\t\t\tconst noHash = location.hash.length <= 1;\n\t\t\tconst bars   = [];\n\t\t\ths.forEach((h, idx) => {\n\t\t\t\tconst bar = createBar(hs, h, opts, noHash && idx === 0);\n\t\t\t\tcont.insertBefore(bar.ul, h.elm);\n\t\t\t\tbars.push(bar);\n\t\t\t\tinst.uls.push(bar.ul);\n\t\t\t});\n\t\t\tassignEvent(inst, bars);\n\t\t\n\t\t\tinst.active = getCurrentByHash(inst, location.hash);\n\t\t\tsetTimeout(() => update(inst), 100);  // For avoiding unnecessary update\n\t\t\treturn inst;\n\t\t}\n\t\t\n\t\tfunction getCurrentByHash(inst, hash) {\n\t\t\tconst id = hash.replace('#', '');\n\t\t\tif (id !== '') {\n\t\t\t\tconst tar = document.getElementById(id);\n\t\t\t\tif (tar && inst.uls.indexOf(tar) !== 0) {\n\t\t\t\t\treturn tar;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction extractHeaders(cont, cid, prefix) {\n\t\t\tconst fh = getFirstHeading(cont);\n\t\t\tif (!fh) return [];\n\t\t\tconst tn = fh.tagName;\n\t\t\tconst hs = [];\n\t\t\n\t\t\tfor (const elm of Array.from(cont.children)) {\n\t\t\t\tif (elm.tagName === tn) {\n\t\t\t\t\tconst id = `${prefix}${cid}-${hs.length + 1}`;\n\t\t\t\t\ths.push({ elm, id });\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn hs;\n\t\t}\n\t\t\n\t\tfunction createBar(hs, curH, opts, activate) {\n\t\t\tconst ul = document.createElement('ul');\n\t\t\tul.id = curH.id;\n\t\t\tul.className = '';  // for Dummy\n\t\t\tsetClass(ul, opts.styleBar);\n\t\t\tif (activate) setClass(ul, opts.styleActive);\n\t\t\tconst as = [];\n\t\t\n\t\t\tfor (const h of hs) {\n\t\t\t\tconst a = createAnchor(h);\n\t\t\t\tconst li = document.createElement('li');\n\t\t\t\tif (h === curH) setClass(li, opts.styleCurrent);\n\t\t\t\tli.appendChild(a);\n\t\t\t\tul.appendChild(li);\n\t\t\t\tas.push(a);\n\t\t\t}\n\t\t\treturn { ul, as };\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction assignEvent(inst, bars) {\n\t\t\tfor (const bar of bars) {\n\t\t\t\tbar.as.forEach((a, i) => {\n\t\t\t\t\ta.addEventListener('click', () => onClick(inst, bars[i].ul));\n\t\t\t\t});\n\t\t\t}\n\t\t\tonIntersect((vs) => {\n\t\t\t\tinst.vs = vs;\n\t\t\t\tupdate(inst);\n\t\t\t}, inst.uls, 0);\n\t\t}\n\t\t\n\t\tfunction onClick(inst, clicked) {\n\t\t\tinst.active = clicked;\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (inst.active) {\n\t\t\t\t\tconst y = inst.active.getBoundingClientRect().top;\n\t\t\t\t\tinst.active = null;\n\t\t\t\t\tif (window.innerHeight < y) update(inst);\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t}\n\t\t\n\t\tfunction update(inst) {\n\t\t\tconst tar = inst.active ? inst.active : getFirstVisible(inst);\n\t\t\tfor (const ul of inst.uls) {\n\t\t\t\tsetClass(ul, inst.opts.styleActive, ul === tar);\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction getFirstVisible(inst) {\n\t\t\tif (!inst.vs) return null;\n\t\t\treturn inst.uls.find((ul, i) => inst.vs[i]);\n\t\t}\n\t\t\n\t\tNS.tabScroll = initialize;\n\t})();\n\n\t(function () {\n\t\t/**\n\t\t *\n\t\t * Stack\n\t\t *\n\t\t * @author Takuto Yanagida\n\t\t * @version 2021-10-23\n\t\t *\n\t\t */\n\t\t\n\t\t\n\t\tfunction initialize(cs, opts = {}) {\n\t\t\tif (cs.length === 0) return;\n\t\t\n\t\t\topts = Object.assign({\n\t\t\t\tstyleBar      : ':ncTabBar',\n\t\t\t\tstyleCurrent  : ':ncCurrent',\n\t\t\t\tstyleActive   : ':ncActive',\n\t\t\t\thashPrefix    : 'tst:',\n\t\t\t\tmaxHeightRate : 0.8,\n\t\t\t\tdoRemoveHeader: false,\n\t\t\t}, opts);\n\t\t\tconst is = [];\n\t\t\tfor (let i = 0; i < cs.length; i += 1) {\n\t\t\t\tconst inst = create(cs[i], i + 1, opts);\n\t\t\t\tif (inst) is.push(inst);\n\t\t\t}\n\t\t\tonResize(() => is.forEach(resize), true);\n\t\t\twindow.addEventListener('hashchange', () => is.forEach(onHashChanged) );\n\t\t\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst id = location.hash.replace('#', '');\n\t\t\t\tif (id !== '') {\n\t\t\t\t\tconst tar = document.getElementById(id);\n\t\t\t\t\tif (tar) tar.scrollIntoView({ behavior: 'smooth' });\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\t\n\t\tfunction onHashChanged(inst) {\n\t\t\tlet idx = getCurrentByHash(inst, location.hash);\n\t\t\tif (idx === null) idx = getAnchorPage(inst, location.hash);\n\t\t\tif (idx !== null) setTimeout(() => update(inst, idx), 10);\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction create(cont, cid, opts) {\n\t\t\tconst inst = {\n\t\t\t\topts,\n\t\t\t\tcont,\n\t\t\t\tps    : null,\n\t\t\t\tbars  : [],\n\t\t\t\tcurIdx: 0,\n\t\t\t};\n\t\t\tconst [hs, ps] = extractHeadersAndPages(cont, cid, opts);\n\t\t\tif (hs.length === 0) return false;\n\t\t\tinst.ps = ps;\n\t\t\n\t\t\tconst bar0 = createBar(hs, opts);\n\t\t\tconst bar1 = createBar(hs, opts);\n\t\t\tinst.bars.push(bar0, bar1);\n\t\t\n\t\t\tcont.insertBefore(bar0.ul, cont.firstChild);\n\t\t\tfor (const p of ps) cont.appendChild(p);\n\t\t\tcont.appendChild(bar1.ul);\n\t\t\n\t\t\tassignEvent(inst);\n\t\t\n\t\t\tconst h = location.hash;\n\t\t\tlet idx = getCurrentByHash(inst, h);\n\t\t\tif (idx === null) idx = getAnchorPage(inst, h);\n\t\t\tif (idx === null) idx = isAccordion(inst) ? -1 : 0;\n\t\t\tsetTimeout(() => update(inst, idx), 10);\n\t\t\treturn inst;\n\t\t}\n\t\t\n\t\tfunction getCurrentByHash(inst, hash) {\n\t\t\tif (hash.indexOf('#') === -1) return null;\n\t\t\tconst re = new RegExp(hash + '$', 'g');\n\t\t\tconst as = inst.bars[0].as;\n\t\t\tfor (let i = 0; i < as.length; i += 1) {\n\t\t\t\tif (as[i].href.match(re)) return i;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\tfunction getAnchorPage(inst, hash) {\n\t\t\tconst id = hash.replace('#', '');\n\t\t\tif (id !== '') {\n\t\t\t\tconst tar = document.getElementById(id);\n\t\t\t\tif (tar) {\n\t\t\t\t\tconst idx = inst.ps.findIndex(p => p.contains(tar));\n\t\t\t\t\tif (idx !== -1) return idx;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction extractHeadersAndPages(cont, cid, opts) {\n\t\t\tconst fh = getFirstHeading(cont);\n\t\t\tif (!fh) return [];\n\t\t\tconst tn = fh.tagName;\n\t\t\tconst hs = [];\n\t\t\tconst ps = [];\n\t\t\tlet curP = null;\n\t\t\n\t\t\tfor (const elm of Array.from(cont.children)) {\n\t\t\t\tif (elm.tagName === tn) {\n\t\t\t\t\tconst id = `${opts.hashPrefix}${cid}-${hs.length + 1}`;\n\t\t\t\t\ths.push({ elm, id });\n\t\t\n\t\t\t\t\tif (curP) ps.push(curP);\n\t\t\t\t\tcurP = document.createElement('div');\n\t\t\t\t\tif (opts.doRemoveHeader) {\n\t\t\t\t\t\tcont.removeChild(elm);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurP.appendChild(elm);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (curP) curP.appendChild(elm);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (curP) ps.push(curP);\n\t\t\treturn [hs, ps];\n\t\t}\n\t\t\n\t\tfunction createBar(hs, opts) {\n\t\t\tconst ul = document.createElement('ul');\n\t\t\tul.className = '';  // for Dummy\n\t\t\tsetClass(ul, opts.styleBar);\n\t\t\tconst as = [];\n\t\t\n\t\t\tfor (const h of hs) {\n\t\t\t\tconst a = createAnchor(h);\n\t\t\t\tconst li = document.createElement('li');\n\t\t\t\tli.appendChild(a);\n\t\t\t\tul.appendChild(li);\n\t\t\t\tas.push(a);\n\t\t\t}\n\t\t\treturn { ul, as };\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction assignEvent(inst) {\n\t\t\tfor (const bar of inst.bars) {\n\t\t\t\tbar.as.forEach((a, i) => {\n\t\t\t\t\ta.addEventListener('click', (e) => onClick(e, inst, i));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction onClick(e, inst, idx) {\n\t\t\te.preventDefault();\n\t\t\tif (getComputedStyle(e.target.parentElement).pointerEvents === 'none') return;\n\t\t\tlet url = e.target.href;\n\t\t\tif (inst.curIdx === idx) {\n\t\t\t\tidx = -1;\n\t\t\t\turl = url.replace(/#.*$/, '');\n\t\t\t}\n\t\t\thistory.pushState({}, null, url);\n\t\t\tupdate(inst, idx);\n\t\t\tscrollToTab(inst);\n\t\t}\n\t\t\n\t\tfunction isAccordion(inst) {\n\t\t\treturn getComputedStyle(inst.bars[0].ul).flexDirection === 'column';\n\t\t}\n\t\t\n\t\tfunction scrollToTab(inst) {\n\t\t\tif (inst.curIdx === -1) return;\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst [{ ul: ul0 }, { ul: ul1 }] = inst.bars;\n\t\t\t\tconst r0 = ul0.getBoundingClientRect();\n\t\t\t\tif (0 <= r0.top && r0.top <= window.innerHeight && 0 <= r0.bottom && r0.bottom <= window.innerHeight) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst r1 = ul1.getBoundingClientRect();\n\t\t\t\tif (isAccordion(inst) || (r1.top < 0 || window.innerHeight < r1.bottom)) {\n\t\t\t\t\tinst.cont.scrollIntoView({ behavior: 'smooth' });\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t\t\n\t\tfunction update(inst, idx) {\n\t\t\tconst ps = inst.ps;\n\t\t\tconst [{ as: a0 }, { as: a1 }] = inst.bars;\n\t\t\n\t\t\tfor (let i = 0; i < ps.length; i += 1) {\n\t\t\t\tsetClass(a0[i].parentElement, inst.opts.styleCurrent, i === idx);\n\t\t\t\tsetClass(a1[i].parentElement, inst.opts.styleCurrent, i === idx);\n\t\t\t\tsetClass(ps[i], inst.opts.styleCurrent, i === idx);\n\t\t\t}\n\t\t\tinst.curIdx = idx;\n\t\t}\n\t\t\n\t\t\n\t\t// -------------------------------------------------------------------------\n\t\t\n\t\t\n\t\tfunction resize(inst) {\n\t\t\tconst cont = inst.cont;\n\t\t\tif (isAccordion(inst)) {\n\t\t\t\tcont.style.minHeight = '';\n\t\t\t} else {\n\t\t\t\tconst minH = getMinHeight(inst);\n\t\t\t\tconst h = (minH < window.innerHeight * inst.opts.maxHeightRate) ? `${minH}px` : '';\n\t\t\t\tcont.style.minHeight = h;\n\t\t\n\t\t\t\tif (inst.curIdx === -1) {\n\t\t\t\t\tupdate(inst, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction getMinHeight(inst) {\n\t\t\tconst [{ ul: ul0 }, { ul: ul1 }] = inst.bars;\n\t\t\n\t\t\tlet marginBtm = parseInt(getComputedStyle(ul0).marginBottom);\n\t\t\tlet marginTop = parseInt(getComputedStyle(ul1).marginTop);\n\t\t\tlet height = 0;\n\t\t\n\t\t\tfor (const p of inst.ps) {\n\t\t\t\tconst ps = getComputedStyle(p);\n\t\t\t\tconst mt = parseInt(ps.marginTop);\n\t\t\t\tconst mb = parseInt(ps.marginBottom);\n\t\t\t\tconst h  = p.getBoundingClientRect().height;\n\t\t\n\t\t\t\tmarginBtm = Math.max(marginBtm, mt);\n\t\t\t\tmarginTop = Math.max(marginTop, mb);\n\t\t\t\theight    = Math.max(height, h);\n\t\t\t}\n\t\t\treturn ul0.offsetHeight + ul1.offsetHeight + marginBtm + marginTop + height;\n\t\t}\n\t\t\n\t\tNS.tabStack = initialize;\n\t})();\n\n\t/**\n\t *\n\t * Style Class Utilities\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-11-11\n\t *\n\t */\n\t\n\t\n\tfunction hasClass(tar, cls) {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn tar.dataset[key] !== undefined;\n\t\t} else {\n\t\t\treturn tar.classList.contains(key);\n\t\t}\n\t}\n\t\n\tfunction setClass(tar, cls, enabled = true, val = '') {\n\t\tconst key = cls.substr(1);\n\t\tif (cls.startsWith(':')) {\n\t\t\tif (enabled) {\n\t\t\t\ttar.dataset[key] = val;\n\t\t\t} else {\n\t\t\t\tdelete tar.dataset[key];\n\t\t\t}\n\t\t} else {\n\t\t\tconst c = [key, val].join('-');\n\t\t\tif (enabled) {\n\t\t\t\ttar.classList.add(c);\n\t\t\t} else {\n\t\t\t\ttar.classList.remove(c);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction getSelector(cls) {\n\t\tif (cls.startsWith(':')) {\n\t\t\treturn `*[data-${cls.substr(1).replace(/([A-Z])/g, c => '-' + c.charAt(0).toLowerCase())}]`;\n\t\t} else {\n\t\t\treturn `*${cls}`;\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Common Functions\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-10-23\n\t *\n\t */\n\t\n\t\n\tfunction getFirstHeading(container) {\n\t\tconst cs = container.children;\n\t\tfor (let i = 0; i < cs.length; i += 1) {\n\t\t\tif (/^H[1-6]$/.test(cs[i].tagName)) return cs[i];\n\t\t}\n\t\treturn null;\n\t}\n\t\n\tfunction createAnchor(h) {\n\t\tconst a = document.createElement('a');\n\t\ta.href  = '#' + h.id;\n\t\ta.title = h.elm.innerText;\n\t\tconst t = h.elm.title ? h.elm.title : h.elm.innerHTML;\n\t\n\t\ta.innerHTML = t;\n\t\ta.querySelectorAll('small').forEach(e => e.remove());\n\t\tif (a.innerText === '') {\n\t\t\ta.innerHTML = t;\n\t\t}\n\t\tspanning(a);\n\t\treturn a;\n\t}\n\t\n\tfunction spanning(e) {\n\t\tfor (const c of Array.from(e.children)) {\n\t\t\tif (c.tagName === 'A' || c.tagName === 'SMALL') {\n\t\t\t\tconst s = document.createElement('span');\n\t\t\t\ts.innerHTML = c.innerHTML;\n\t\t\t\te.replaceChild(s, c);\n\t\t\t\tspanning(s);\n\t\t\t} else {\n\t\t\t\tspanning(c);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t/**\n\t *\n\t * Utilities\n\t *\n\t * @author Takuto Yanagida\n\t * @version 2021-11-17\n\t *\n\t */\n\t\n\t\n\tfunction getScrollOffset() {\n\t\tconst s = getComputedStyle(document.documentElement);\n\t\treturn parseInt(s.scrollPaddingTop);\n\t}\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction throttle(fn) {\n\t\tlet isRunning;\n\t\treturn (...args) => {\n\t\t\tif (isRunning) return;\n\t\t\tisRunning = true;\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tisRunning = false;\n\t\t\t\tfn(...args);\n\t\t\t});\n\t\t};\n\t}\n\t\n\tconst resizeListeners = [];\n\t\n\tfunction onResize(fn, doFirst = false) {\n\t\tif (doFirst) fn();\n\t\tresizeListeners.push(throttle(fn));\n\t}\n\t\n\tdocument.addEventListener('DOMContentLoaded', () => {\n\t\twindow.addEventListener('resize', () => {\n\t\t\tfor (const l of resizeListeners) l();\n\t\t}, { passive: true });\n\t});\n\t\n\t\n\t// -----------------------------------------------------------------------------\n\t\n\t\n\tfunction onIntersect(fn, targets, threshold = 0, rootMargin = '* 0px 0px 0px') {\n\t\tconst vs = Array(targets.length).fill(false);\n\t\tconst tm = new Map();\n\t\ttargets.forEach((t, i) => tm.set(t, i));\n\t\n\t\tfunction init() {\n\t\t\tconst io = new IntersectionObserver((es) => {\n\t\t\t\tfor (const e of es) vs[tm.get(e.target)] = e.isIntersecting;\n\t\t\t\tfn(vs);\n\t\t\t}, { rootMargin: rootMargin.replace('*', `${mt}px`), threshold });\n\t\t\tfor (const t of targets) io.observe(t);\n\t\t\treturn io;\n\t\t}\n\t\tlet mt = 0;\n\t\tlet io = null;\n\t\tlet st = null;\n\t\tonResize(() => {\n\t\t\tmt = -getScrollOffset();\n\t\t\tif (st) clearTimeout(st);\n\t\t\tst = setTimeout(() => {\n\t\t\t\tif (io) io.disconnect();\n\t\t\t\tio = init();\n\t\t\t}, 100);\n\t\t}, true);\n\t}\n\t\n\n})(window['NACSS']);\n"]}