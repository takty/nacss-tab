window.NACSS=window.NACSS||{},function(t){function e(t){let e=i(t,location.hash);null===e&&(e=l(t,location.hash)),null!==e&&setTimeout((()=>a(t,e)),10)}function n(t,e,n){const c={opts:n,cont:t,ps:null,bars:[],curIdx:0},[u,f]=function(t,e,n){const o=function(t){const e=t.children;for(let t=0;t<e.length;t+=1)if(/^H[1-6]$/.test(e[t].tagName))return e[t];return null}(t);if(!o)return[];const r=o.tagName,s=[],i=[];let l=null;for(const o of Array.from(t.children))if(o.tagName===r){const r=`${n.hashPrefix}${e}-${s.length+1}`;s.push({elm:o,id:r}),l&&i.push(l),l=document.createElement("div"),n.doRemoveHeader?t.removeChild(o):l.appendChild(o)}else l&&l.appendChild(o);l&&i.push(l);return[s,i]}(t,e,n);if(0===u.length)return!1;c.ps=f;const d=o(u,n),h=o(u,n);c.bars.push(d,h),t.insertBefore(d.ul,t.firstChild);for(const e of f)t.appendChild(e);return t.appendChild(h.ul),function(t){for(const e of t.bars)e.as.forEach(((e,n)=>{e.addEventListener("click",(e=>r(e,t,n)))}));const e=location.hash;let n=i(t,e);null===n&&(n=l(t,e));null===n&&(n=s(t)?-1:0);setTimeout((()=>a(t,n)),10)}(c),c}function o(t,e){const n=document.createElement("ul");n.className="",f(!0,n,e.styleBar);const o=[];for(const e of t){const t=u(e),r=document.createElement("li");r.appendChild(t),n.appendChild(r),o.push(t)}return{ul:n,as:o}}function r(t,e,n){if(t.preventDefault(),"none"===getComputedStyle(t.target.parentElement).pointerEvents)return;let o=t.target.href;e.curIdx===n&&(n=-1,o=o.replace(/#.*$/,"")),history.pushState({},null,o),a(e,n),function(t){if(-1===t.curIdx)return;setTimeout((()=>{const[{ul:e},{ul:n}]=t.bars,o=e.getBoundingClientRect();if(0<=o.top&&o.top<=window.innerHeight&&0<=o.bottom&&o.bottom<=window.innerHeight)return;const r=n.getBoundingClientRect();(s(t)||r.top<0||window.innerHeight<r.bottom)&&t.cont.scrollIntoView({behavior:"smooth"})}),10)}(e)}function s(t){return"column"===getComputedStyle(t.bars[0].ul).flexDirection}function i(t,e){if(-1===e.indexOf("#"))return null;const n=new RegExp(e+"$","g"),o=t.bars[0].as;for(let t=0;t<o.length;t+=1)if(o[t].href.match(n))return t;return null}function l(t,e){const n=e.replace("#",""),o=document.getElementById(n);if(!o)return null;for(let e=0;e<t.ps.length;e+=1)if(t.ps[e].contains(o))return e;return null}function a(t,e){const n=t.ps,[{as:o},{as:r}]=t.bars;for(let s=0;s<n.length;s+=1)f(s===e,o[s].parentElement,t.opts.styleCurrent),f(s===e,r[s].parentElement,t.opts.styleCurrent),f(s===e,n[s],t.opts.styleCurrent);t.curIdx=e}function c(t){const e=t.cont;if(s(t))e.style.minHeight="";else{const n=function(t){const[{ul:e},{ul:n}]=t.bars;let o=parseInt(getComputedStyle(e).marginBottom),r=parseInt(getComputedStyle(n).marginTop),s=0;for(const e of t.ps){const t=getComputedStyle(e),n=parseInt(t.marginTop),i=parseInt(t.marginBottom),l=e.getBoundingClientRect().height;o=Math.max(o,n),r=Math.max(r,i),s=Math.max(s,l)}return e.offsetHeight+n.offsetHeight+o+r+s}(t),o=n<window.innerHeight*t.opts.maxHeightRate?`${n}px`:"";e.style.minHeight=o,-1===t.curIdx&&a(t,0)}}function u(t){const e=document.createElement("a");return e.href="#"+t.id,e.innerHTML=t.elm.innerHTML,e.querySelectorAll("small").forEach((t=>t.remove())),e.querySelectorAll("a").forEach((t=>t.remove())),e.title=e.innerText,e}function f(t,e,n){const o=n.substr(1);n.startsWith(":")?t?e.dataset[o]="":delete e.dataset[o]:t?e.classList.add(o):e.classList.remove(o)}window["NACSS"].tabStack=function(t,o={}){if(0===t.length)return;o=Object.assign({styleBar:":ncTabBar",styleCurrent:":ncCurrent",styleActive:":ncActive",hashPrefix:"tst:",maxHeightRate:.8,doRemoveHeader:!1},o);const r=[];for(let e=0;e<t.length;e+=1){const s=n(t[e],e+1,o);s&&r.push(s)}h((()=>r.forEach(c)),!0),window.addEventListener("hashchange",(()=>r.forEach(e)))};const d=[];function h(t,e=!1){e&&t(),d.push(function(t){let e;return(...n)=>{e||(e=!0,requestAnimationFrame((()=>{e=!1,t(...n)})))}}(t))}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const t of d)t()}),{passive:!0})}))}();
//# sourceMappingURL=tab-stack.min.js.map