"use strict";window.NACSS=window.NACSS||{},window.NACSS.tab=window.NACSS.tab||{},(t=>{function e(t,e,n=!0,o=""){const r=e.substr(1);if(e.startsWith(":"))n?t.dataset[r]=o:delete t.dataset[r];else{const e=[r,o].join("-");n?t.classList.add(e):t.classList.remove(e)}}const n=[];function o(t,e=!1){e&&t(),n.push(function(t){let e;return(...n)=>{e||(e=!0,requestAnimationFrame((()=>{e=!1,t(...n)})))}}(t))}function r(t){let e=s(t,location.hash);null===e&&(e=l(t,location.hash)),null!==e&&setTimeout((()=>d(t,e)),10)}function i(t,e,n){const o={opts:n,cont:t,ps:null,bars:[],curIdx:0},[r,i]=function(t,e,n){const o=function(t){const e=t.children;for(let t=0;t<e.length;t+=1)if(/^H[1-6]$/.test(e[t].tagName))return e[t];return null}(t);if(!o)return[];const r=o.tagName,i=[],s=[];let l=null;for(const o of[...t.children])if(o.tagName===r){const r=`${n.hashPrefix}${e}-${i.length+1}`;i.push({elm:o,id:r}),l&&s.push(l),l=document.createElement("div"),n.doRemoveHeader?t.removeChild(o):l.appendChild(o)}else l&&l.appendChild(o);l&&s.push(l);return[i,s]}(t,e,n);if(0===r.length)return!1;o.ps=i;const f=c(r,n),h=c(r,n);o.bars.push(f,h),t.insertBefore(f.ul,t.firstChild);for(const e of i)t.appendChild(e);t.appendChild(h.ul),function(t){for(const e of t.bars)e.as.forEach(((e,n)=>{e.addEventListener("click",(e=>a(e,t,n)))}))}(o);const m=location.hash;let p=s(o,m);return null===p&&(p=l(o,m)),null===p&&(p=u(o)?-1:0),setTimeout((()=>d(o,p)),10),o}function s(t,e){if(-1===e.indexOf("#"))return null;const n=new RegExp(e+"$","g"),o=t.bars[0].as;for(let t=0;t<o.length;t+=1)if(o[t].href.match(n))return t;return null}function l(t,e){const n=e.replace("#","");if(""!==n){const e=document.getElementById(n);if(e){const n=t.ps.findIndex((t=>t.contains(e)));if(-1!==n)return n}}return null}function c(t,n){const o=document.createElement("ul");o.className="",e(o,n.styleBar);const r=[];for(const e of t){const t=h(e),n=document.createElement("li");n.appendChild(t),o.appendChild(n),r.push(t)}return{ul:o,as:r}}function a(t,e,n){if(t.preventDefault(),"none"===getComputedStyle(t.target.parentElement).pointerEvents)return;let o=t.target.href;e.curIdx===n&&(n=-1,o=o.replace(/#.*$/,"")),history.pushState({},null,o),d(e,n),function(t){if(-1===t.curIdx)return;setTimeout((()=>{const[{ul:e},{ul:n}]=t.bars,o=e.getBoundingClientRect();if(0<=o.top&&o.top<=window.innerHeight&&0<=o.bottom&&o.bottom<=window.innerHeight)return;const r=n.getBoundingClientRect();(u(t)||r.top<0||window.innerHeight<r.bottom)&&t.cont.scrollIntoView({behavior:"smooth"})}),10)}(e)}function u(t){return"column"===getComputedStyle(t.bars[0].ul).flexDirection}function d(t,n){const o=t.ps,[{as:r},{as:i}]=t.bars;for(let s=0;s<o.length;s+=1)e(r[s].parentElement,t.opts.styleCurrent,s===n),e(i[s].parentElement,t.opts.styleCurrent,s===n),e(o[s],t.opts.styleCurrent,s===n);t.curIdx=n}function f(t){const e=t.cont;if(u(t))e.style.minHeight="";else{const n=function(t){const[{ul:e},{ul:n}]=t.bars;let o=parseInt(getComputedStyle(e).marginBottom),r=parseInt(getComputedStyle(n).marginTop),i=0;for(const e of t.ps){const t=getComputedStyle(e),n=parseInt(t.marginTop),s=parseInt(t.marginBottom),l=e.getBoundingClientRect().height;o=Math.max(o,n),r=Math.max(r,s),i=Math.max(i,l)}return e.offsetHeight+n.offsetHeight+o+r+i}(t),o=n<window.innerHeight*t.opts.maxHeightRate?`${n}px`:"";e.style.minHeight=o,-1===t.curIdx&&d(t,0)}}function h(t){const e=document.createElement("a");e.href="#"+t.id,e.title=t.elm.innerText;const n=t.elm.title?t.elm.title:t.elm.innerHTML;return e.innerHTML=n,e.querySelectorAll("small").forEach((t=>t.remove())),""===e.innerText&&(e.innerHTML=n),m(e),e}function m(t){for(const e of[...t.children])if("A"===e.tagName||"SMALL"===e.tagName){const n=document.createElement("span");n.innerHTML=e.innerHTML,t.replaceChild(n,e),m(n)}else m(e)}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const t of n)t()}),{passive:!0})})),t.applyStack=function(t,e={}){if(0===t.length)return;e=Object.assign({styleBar:":ncTabBar",styleCurrent:":ncCurrent",styleActive:":ncActive",hashPrefix:"tst:",maxHeightRate:.8,doRemoveHeader:!1},e);const n=[];for(let o=0;o<t.length;o+=1){const r=i(t[o],o+1,e);r&&n.push(r)}o((()=>n.forEach(f)),!0),window.addEventListener("hashchange",(()=>n.forEach(r))),setTimeout((()=>{const t=location.hash.replace("#","");if(""!==t){const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}}),10)}})(window.NACSS.tab);
//# sourceMappingURL=tab-stack.min.js.map