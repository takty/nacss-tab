"use strict";window.NACSS=window.NACSS||{},window.NACSS.tab=window.NACSS.tab||{},(t=>{function e(t,e,n=!0,o=""){const s=e.substr(1);if(e.startsWith(":"))n?t.dataset[s]=o:delete t.dataset[s];else{const e=[s,o].join("-");n?t.classList.add(e):t.classList.remove(e)}}const n=[];function o(t,e=!1){e&&t(),n.push(function(t){let e;return(...n)=>{e||(e=!0,requestAnimationFrame((()=>{e=!1,t(...n)})))}}(t))}function s(t,e,n=0,s="* 0px 0px 0px"){const i=Array(e.length).fill(!1),r=new Map;e.forEach(((t,e)=>r.set(t,e)));let c=0,l=null,a=null;o((()=>{c=-function(){const t=getComputedStyle(document.documentElement),e=parseInt(t.scrollPaddingTop);return Number.isNaN(e)?0:e}(),a&&clearTimeout(a),a=setTimeout((()=>{l&&l.disconnect(),l=function(){const o=new IntersectionObserver((e=>{for(const t of e)i[r.get(t.target)]=t.isIntersecting;t(i)}),{rootMargin:s.replace("*",`${c}px`),threshold:n});for(const t of e)o.observe(t);return o}()}),100)}),!0)}document.addEventListener("DOMContentLoaded",(()=>{window.addEventListener("resize",(()=>{for(const t of n)t()}),{passive:!0})}));{function l(t,e={}){if(0===t.length)return;e=Object.assign({styleBar:":ncTabBar",styleCurrent:":ncCurrent",styleActive:":ncActive",hashPrefix:"tsc:"},e);const n=[];for(let o=0;o<t.length;o+=1){const s=u(t[o],o+1,e);s&&n.push(s)}window.addEventListener("hashchange",(()=>n.forEach(a)))}function a(t){const e=d(t,location.hash);t.active=e,setTimeout((()=>g(t)),10)}function u(t,e,n){const o={opts:n,vs:null,uls:[],active:null},s=f(t,e,n.hashPrefix);if(0===s.length)return!1;const i=location.hash.length<=1,r=[];return s.forEach(((e,c)=>{const l=h(s,e,n,i&&0===c);t.insertBefore(l.ul,e.elm),r.push(l),o.uls.push(l.ul)})),p(o,r),o.active=d(o,location.hash),setTimeout((()=>g(o)),100),o}function d(t,e){const n=e.replace("#","");if(""!==n){const e=document.getElementById(n);if(e&&0!==t.uls.indexOf(e))return e}return null}function f(t,e,n){const o=i(t);if(!o)return[];const s=o.tagName,r=[];for(const o of[...t.children])if(o.tagName===s){const t=`${n}${e}-${r.length+1}`;r.push({elm:o,id:t})}return r}function h(t,n,o,s){const i=document.createElement("ul");i.id=n.id,i.className="",e(i,o.styleBar),s&&e(i,o.styleActive);const c=[];for(const s of t){const t=r(s),l=document.createElement("li");s===n&&(e(t,o.styleCurrent),e(l,o.styleCurrent)),l.appendChild(t),i.appendChild(l),c.push(t)}return{ul:i,as:c}}function p(t,e){for(const n of e)n.as.forEach(((o,s)=>{o.addEventListener("click",(()=>m(t,n.ul,e[s].ul)))}));s((e=>{t.vs=e,g(t)}),t.uls,0)}function m(t,e,n){if(n!==e){const t=e.getBoundingClientRect().top,o=n.getBoundingClientRect();o.y<t&&0<=o.y&&o.y+o.height<window.innerHeight&&setTimeout((()=>window.scrollBy({top:o.y-t})),200)}t.active=n,setTimeout((()=>{if(t.active){const e=t.active.getBoundingClientRect().top;t.active=null,window.innerHeight<e&&g(t)}}),1e3)}function g(t){const n=t.active?t.active:y(t);for(const o of t.uls)e(o,t.opts.styleActive,o===n)}function y(t){return t.vs?t.uls.find(((e,n)=>t.vs[n])):null}t.applyScroll=l}{function v(t,e={}){if(0===t.length)return;!(e=Object.assign({styleBar:":ncTabBar",styleCurrent:":ncCurrent",styleActive:":ncActive",styleVertical:":ncVertical",hashPrefix:"tst:",maxHeightRate:.8,maxVerticalWidth:599.5,doRemoveHeading:!1,doUseHeadingId:!1,doUseBarBelow:!0},e)).doRemoveHeading&&e.doUseHeadingId&&(e.doUseHeadingId=!1,console.log("nacss.tab.stack: 'opts.doRemoveHeading' must be true when 'opts.doUseHeadingId' is true"));const n=[];for(let o=0;o<t.length;o+=1){const s=C(t[o],o+1,e);s&&n.push(s)}o((()=>n.forEach(N)),!0),window.addEventListener("hashchange",(()=>n.forEach(w))),setTimeout((()=>{const t=location.hash.replace("#","");if(""!==t){const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}}),10)}function w(t){let e=E(t,location.hash);null===e&&(e=b(t,location.hash)),null!==e&&setTimeout((()=>L(t,e)),10)}function C(t,e,n){const o={opts:n,cont:t,ps:null,bars:[],curIdx:0},[s,i]=x(t,e,n);if(0===s.length)return!1;o.ps=i;const r=H(s,n),c=H(s,n);o.bars.push(r,c),t.insertBefore(r.ul,t.firstChild);for(const e of i)t.appendChild(e);t.appendChild(c.ul),B(o);const l=location.hash;let a=E(o,l);return null===a&&(a=b(o,l)),null===a&&(a=T(o)?-1:0),setTimeout((()=>L(o,a)),10),o}function E(t,e){if(-1===e.indexOf("#"))return null;const n=new RegExp(e+"$","g"),o=t.bars[0].as;for(let t=0;t<o.length;t+=1)if(o[t].href.match(n))return t;return null}function b(t,e){const n=e.replace("#","");if(""!==n){const e=document.getElementById(n);if(e){const n=t.ps.findIndex((t=>t.contains(e)));if(-1!==n)return n}}return null}function x(t,e,n){const o=i(t);if(!o)return[];const s=o.tagName,r=[],c=[];let l=null;for(const o of[...t.children])if(o.tagName===s){const s=n.doUseHeadingId&&o.id?o.id:`${n.hashPrefix}${e}-${r.length+1}`;r.push({elm:o,id:s}),l&&c.push(l),l=document.createElement("div"),n.doRemoveHeading?t.removeChild(o):l.appendChild(o)}else l&&l.appendChild(o);return l&&c.push(l),[r,c]}function H(t,n){const o=document.createElement("ul");o.className="",e(o,n.styleBar);const s=[];for(const e of t){const t=r(e),n=document.createElement("li");n.appendChild(t),o.appendChild(n),s.push(t)}return{ul:o,as:s}}function B(t){for(const e of t.bars)e.as.forEach(((e,n)=>{e.addEventListener("click",(e=>I(e,t,n)))}))}function I(t,e,n){if(t.preventDefault(),"none"===getComputedStyle(t.target.parentElement).pointerEvents)return;let o=t.currentTarget.href;e.curIdx===n&&(n=-1,o=o.replace(/#.*$/,"")),history.pushState({},null,o),L(e,n),S(e)}function T(t){return function(t,e){const n=e.substr(1);return e.startsWith(":")?void 0!==t.dataset[n]:t.classList.contains(n)}(t.cont,t.opts.styleVertical)}function S(t){-1!==t.curIdx&&setTimeout((()=>{const[{ul:e},{ul:n}]=t.bars,o=e.getBoundingClientRect();if(0<=o.top&&o.top<=window.innerHeight&&0<=o.bottom&&o.bottom<=window.innerHeight)return;const s=n.getBoundingClientRect();(T(t)||s.top<0||window.innerHeight<s.bottom)&&t.cont.scrollIntoView({behavior:"smooth"})}),10)}function L(t,n){const o=t.ps,[{as:s},{as:i}]=t.bars;for(let r=0;r<o.length;r+=1)e(s[r],t.opts.styleCurrent,r===n),e(i[r],t.opts.styleCurrent,r===n),e(s[r].parentElement,t.opts.styleCurrent,r===n),e(i[r].parentElement,t.opts.styleCurrent,r===n),e(o[r],t.opts.styleCurrent,r===n);t.curIdx=n}function N(t){const n=t.cont;if(e(n,t.opts.styleVertical,window.innerWidth<=t.opts.maxVerticalWidth),T(t))n.style.minHeight="",t.opts.doUseBarBelow||(t.bars[1].ul.style.display="");else{const e=A(t),o=e<window.innerHeight*t.opts.maxHeightRate?`${e}px`:"";n.style.minHeight=o,t.opts.doUseBarBelow||(t.bars[1].ul.style.display="none"),-1===t.curIdx&&L(t,0)}}function A(t){const[{ul:e},{ul:n}]=t.bars;let o=parseInt(getComputedStyle(e).marginBottom),s=parseInt(getComputedStyle(n).marginTop),i=0;for(const e of t.ps){const t=getComputedStyle(e),n=parseInt(t.marginTop),r=parseInt(t.marginBottom),c=e.getBoundingClientRect().height;o=Math.max(o,n),s=Math.max(s,r),i=Math.max(i,c)}return e.offsetHeight+n.offsetHeight+o+s+i}t.applyStack=v}function i(t){const e=t.children;for(let t=0;t<e.length;t+=1)if(/^H[1-6]$/.test(e[t].tagName))return e[t];return null}function r(t){const e=document.createElement("a");e.href="#"+t.id,e.title=t.elm.innerText;const n=t.elm.title?t.elm.title:t.elm.innerHTML;return e.innerHTML=n,e.querySelectorAll("small").forEach((t=>t.remove())),""===e.innerText&&(e.innerHTML=n),c(e),e}function c(t){for(const e of[...t.children])if("A"===e.tagName||"SMALL"===e.tagName){const n=document.createElement("span");n.innerHTML=e.innerHTML,t.replaceChild(n,e),c(n)}else c(e)}})(window.NACSS.tab);//# sourceMappingURL=tab.min.js.map
